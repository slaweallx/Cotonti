/**
 * @package Cotonti
 * @copyright (c) Cotonti Team
 * @license https://github.com/Cotonti/Cotonti/blob/master/License.txt
 */
let CotontiPeriodicalRequest=null;!function(){CotontiPeriodicalRequest=class{#e;#t=null;#a=!1;constructor(){this.#e=new Map}add(t,a,o,n){this.#e.set(t,new e(a,o,n)),this.#o()}remove(e){this.#e.delete(e),this.#o()}#o(){let e=0;this.#e.forEach(((t,a,o)=>{(0===e||e>t.timeout)&&(e=t.timeout)})),null!==this.#t&&(window.clearTimeout(this.#t),this.#t=null),this.#t=window.setTimeout((()=>{this.#n()}),1e3*e)}#r(){}#n(){if(this.#a)return;this.#a=!0,console.log("Execute request start");const e=Date.now();let t=null;do{t=Date.now()}while(t-e<2e3);console.log("Execute request end")}};class e{params;callback;timeout;constructor(e,t,a){this.params=e,this.callback=t,this.timeout=a}}}();class CotontiApplication{#i=null;async loadData(e){if(!e)return{};void 0===this.loadedData&&(this.loadedData={});let t=[];("string"==typeof e||e instanceof String)&&(e=[e]);for(let a of e)a in this.loadedData||t.push(a);if(t.length>0){let e=new URLSearchParams({a:"get"});t.forEach(((t,a,o)=>{e.append("data["+a+"]",t)})),e.append("_ajax",1);try{let t=await fetch("index.php?"+e.toString());if(t.ok){const e=await t.json();if(e.success)for(const t in e.data)this.loadedData[t]=e.data[t]}}catch(e){}}let a={};for(let t of e)t in this.loadedData&&(a[t]=this.loadedData[t]);return a}loadCaptcha(){this.loadData(["captcha","x"]).then((e=>{let t=document.querySelectorAll(".captcha-place-holder");for(let a of t){a.innerHTML=e.captcha,this.executeScriptElements(a),a.classList.remove("captcha-place-holder","loading"),a.classList.add("captcha");const t=a.closest("form");if(null!==t){let a=t.querySelector('input[type="hidden"][name="x"]');null!==a&&a.setAttribute("value",e.x)}}}))}getPeriodicalRequest(){return null===this.#i&&(this.#i=new CotontiPeriodicalRequest),this.#i}executeScriptElements(e){const t=e.querySelectorAll("script");Array.from(t).forEach((e=>{const t=document.createElement("script");Array.from(e.attributes).forEach((e=>{t.setAttribute(e.name,e.value)})),t.text=e.text,e.parentNode.replaceChild(t,e)}))}}let cot=new CotontiApplication;function encodeURIfix(e){return encodeURI(decodeURI(e)).replace(/%5B/g,"[").replace(/%5D/g,"]")}function getBaseHref(){var e=document.getElementsByTagName("base")[0].href;return null==e?"/":e}function popup(e,t,a){window.open(getBaseHref()+"index.php?o="+e,"","toolbar=0,location=0,directories=0,menuBar=0,resizable=0,scrollbars=yes,width="+t+",height="+a+",left=32,top=16")}function pfs(e,t,a,o){window.open(getBaseHref()+"index.php?e=pfs&userid="+e+"&c1="+t+"&c2="+a+"&parser="+o,"PFS","status=1, toolbar=0,location=0,directories=0,menuBar=0,resizable=1,scrollbars=yes,width=754,height=512,left=32,top=16")}function redirect(e){location.href=e.options[e.selectedIndex].value}function toggleblock(e){var t=document.getElementById(e);return"none"==t.style.display?t.style.display="":t.style.display="none",!1}function toggleAll(e){var t=document.querySelectorAll('[id^="blk_"]');for(i=0;i<t.length;i++)"hide"==e?t[i].style.display="none":"show"==e&&(t[i].style.display="table-row-group");return!1}function insertText(e,t,a){var o=null;e||(e=document);e:for(var n=0;n<e.forms.length;n++)for(var r=0;r<e.forms[n].elements.length;r++)if(e.forms[n].elements[r].name==t){o=e.forms[n].elements[r];break e}if(!o)return!1;if(e.selection)o.focus(),e.selection.createRange().text=a;else if(o.selectionStart||0==o.selectionStart){var i=o.selectionStart,s=o.selectionEnd;o.value=o.value.substring(0,i)+a+o.value.substring(s,o.value.length)}else o.value+=a;return!0}var ajaxErrorHandlers=new Array,ajaxSuccessHandlers=new Array,ajaxEnabled=!1;if("undefined"!=typeof jQuery)var ajaxCurrentBase=location.href.replace($("base").eq(0).attr("href"),"").replace(/\?.*$/,"").replace(/#.*$/,"");var ajaxUsed=!1,ajaxError=!1;function ajaxSend(e){var t=e.method?e.method.toUpperCase():"GET",a=e.data||"",o=e.url||$("#"+e.formId).attr("action");if("POST"===t)a+="&"+$("#"+e.formId).serialize();else if(e.formId){var n=o.indexOf("?")>0?"&":"?";o+=n+$("#"+e.formId).serialize()}return $.ajax({type:t,url:encodeURIfix(o),data:a,beforeSend:function(){e.nonshowloading||$("#"+e.divId).append('<span style="position:absolute; left:'+($("#"+e.divId).width()/2-110)+"px;top:"+($("#"+e.divId).height()/2-9)+'px;" class="loading" id="loading"><img src="./images/spinner.gif" alt="loading"/></span>').css("position","relative")},success:function(t){e.nonshowloading||$("#loading").remove(),e.nonshowfadein?$("#"+e.divId).html(t):$("#"+e.divId).hide().html(t).fadeIn(500);for(var a=0;a<ajaxSuccessHandlers.length;a++)ajaxSuccessHandlers[a].func?ajaxSuccessHandlers[a].func(t):ajaxSuccessHandlers[a](t)},error:function(t){if(e.nonshowloading||$("#loading").remove(),e.nonshowfadein?$("#"+e.divId).html(t):$("#"+e.divId).hide().html(t).fadeIn(500),ajaxErrorHandlers.length>0)for(var a=0;a<ajaxErrorHandlers.length;a++)ajaxErrorHandlers[a].func?ajaxErrorHandlers[a].func(t):ajaxErrorHandlers[a](t);else alert("AJAX error: "+t),ajaxError=!0}}),!1}function ajaxPageLoad(e){""!==e&&e.replace(/^#/,"");var t=e.match(/^get(-.*?)?;(.*)$/);if(t){var a=t[2].indexOf(";")>0?t[2].replace(";","?"):ajaxCurrentBase+"?"+decodeURIComponent(t[2]);return ajaxUsed=!0,ajaxSend({method:"GET",url:a,divId:t[1]?t[1].substr(1):"ajaxBlock"})}return""!==e||!ajaxUsed||ajaxSend({url:location.href.replace(/#.*$/,""),divId:"ajaxBlock"})}function ajaxFormLoad(e,t){var a=e.match(/^(get|post)(-.*?)?;(.*)$/);if(a){var o=a[3].indexOf(";")>0?a[3].replace(";","?"):ajaxCurrentBase+"?"+a[3];return ajaxUsed=!0,ajaxSend({method:a[1].toUpperCase(),url:o,divId:a[2]?a[2].substr(1):"ajaxBlock",formId:t})}return!0}function ajaxMakeHash(e,t,a){var o,n,r="post"==a?"post":"get",i="?",s=!!t&&t.match(/(get|post)(-[^ ;]+)?(;\S*)?/);return s&&(r=s[1],s[2]&&(r+=s[2]),s[3]&&(e=s[3].substr(1),i=";")),r+=";",e.indexOf(i)>0?(o=e.substr(0,e.indexOf(i)),n=e.substr(e.indexOf(i)+1),a&&"post"!=a&&(n+="&"+a)):(o=e,n="",a&&"post"!=a&&(n+=i+a)),r+=o==ajaxCurrentBase?n:o+";"+n}function bindHandlers(){("#comments"==location.hash||location.hash.match(/#c\d+/))&&$(".comments").css("display",""),$(".comments_link").click((function(){"none"==$(".comments").css("display")?$(".comments").css("display",""):$(".comments").css("display","none")})),location.href.match(/#comments/)&&$(".comments").css("display",""),ajaxEnabled&&($("body").on("submit","form.ajax",(function(){return"POST"==$(this).attr("method").toUpperCase()?ajaxFormLoad(ajaxMakeHash($(this).attr("action").replace(/#.*$/,""),$(this).attr("class"),"post"),$(this).attr("id")):window.location.hash=ajaxMakeHash($(this).attr("action").replace(/#.*$/,""),$(this).attr("class"),$(this).serialize()),ajaxError})),$("body").on("click","a.ajax",(function(){return window.location.hash=ajaxMakeHash($(this).attr("href").replace(/#.*$/,""),$(this).attr("rel")),ajaxError})),$("body").on("click","a.confirmLink",(function(){return!$(this).attr("href").match(/message.+920/i)||($("#confirmBox")&&$("#confirmBox").remove(),$("body").prepend('<div id="confirmBox" class="jqmWindow"></div>'),$("#confirmBox").jqm({ajax:$(this).attr("href"),modal:!0,onLoad:function(){$("#confirmBox").css("margin-left","-"+$("#confirmBox").width()/2+"px"),$("#confirmBox").css("margin-top","-"+$("#confirmBox").height()/2+"px")}}),$("#confirmBox").jqmShow(),!1)})),$(window).on("hashchange",(function(){ajaxPageLoad(window.location.hash.replace(/^#/,""))})),$("body").on("click","a#confirmNo",(function(){return!$("#confirmBox").is(".jqmWindow")||($("#confirmBox").jqmHide(),$("#confirmBox").remove(),!1)})))}"undefined"!=typeof jQuery&&$(document).ready((function(){ajaxEnabled&&""!=window.location.hash&&ajaxPageLoad(window.location.hash.replace(/^#/,"")),bindHandlers()})),window.name="main";
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNvdG9udGlQZXJpb2RpY2FsUmVxdWVzdC5qcyIsIkNvdG9udGlBcHBsaWNhdGlvbi5qcyIsImJhc2UuanMiXSwibmFtZXMiOlsiQ290b250aVBlcmlvZGljYWxSZXF1ZXN0IiwicmVxdWVzdHNSZWdpc3RyeSIsImV4ZWN1dGlvblRpbWVPdXRJZCIsImV4ZWN1dGluZyIsImNvbnN0cnVjdG9yIiwidGhpcyIsIk1hcCIsImFkZCIsImlkIiwicGFyYW1zIiwiY2FsbGJhY2siLCJ0aW1lb3V0Iiwic2V0IiwiUmVxdWVzdEl0ZW0iLCJzZXRFeGVjdXRpb24iLCJyZW1vdmUiLCJkZWxldGUiLCJtaW5UaW1lb3V0IiwiZm9yRWFjaCIsIml0ZW0iLCJrZXkiLCJtYXAiLCJ3aW5kb3ciLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiZXhlY3V0ZSIsInNldEV4ZWN1dGluZyIsImNvbnNvbGUiLCJsb2ciLCJkYXRlIiwiRGF0ZSIsIm5vdyIsImN1cnJlbnREYXRlIiwiQ290b250aUFwcGxpY2F0aW9uIiwicGVyaW9kaWNhbFJlcXVlc3QiLCJsb2FkRGF0YSIsIndoYXQiLCJ1bmRlZmluZWQiLCJsb2FkZWREYXRhIiwiZGF0YVRvTG9hZCIsIlN0cmluZyIsInB1c2giLCJsZW5ndGgiLCJVUkxTZWFyY2hQYXJhbXMiLCJhIiwiaW5kZXgiLCJhcnJheSIsImFwcGVuZCIsInJlc3BvbnNlIiwiZmV0Y2giLCJ0b1N0cmluZyIsIm9rIiwicmVzcG9uc2VEYXRhIiwianNvbiIsInN1Y2Nlc3MiLCJkYXRhIiwiZXJyb3IiLCJyZXN1bHQiLCJsb2FkQ2FwdGNoYSIsInRoZW4iLCJjYXB0Y2hhRWxlbWVudHMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJlbGVtZW50IiwiaW5uZXJIVE1MIiwiY2FwdGNoYSIsImV4ZWN1dGVTY3JpcHRFbGVtZW50cyIsImNsYXNzTGlzdCIsImZvcm0iLCJjbG9zZXN0IiwiaW5wdXRYIiwicXVlcnlTZWxlY3RvciIsInNldEF0dHJpYnV0ZSIsIngiLCJnZXRQZXJpb2RpY2FsUmVxdWVzdCIsImNvbnRhaW5lckVsZW1lbnQiLCJzY3JpcHRFbGVtZW50cyIsIkFycmF5IiwiZnJvbSIsInNjcmlwdEVsZW1lbnQiLCJjbG9uZWRFbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsImF0dHJpYnV0ZXMiLCJhdHRyaWJ1dGUiLCJuYW1lIiwidmFsdWUiLCJ0ZXh0IiwicGFyZW50Tm9kZSIsInJlcGxhY2VDaGlsZCIsImNvdCIsImVuY29kZVVSSWZpeCIsInN0ciIsImVuY29kZVVSSSIsImRlY29kZVVSSSIsInJlcGxhY2UiLCJnZXRCYXNlSHJlZiIsImhyZWYiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInBvcHVwIiwiY29kZSIsInciLCJoIiwib3BlbiIsInBmcyIsImMxIiwiYzIiLCJwYXJzZXIiLCJyZWRpcmVjdCIsInVybCIsImxvY2F0aW9uIiwib3B0aW9ucyIsInNlbGVjdGVkSW5kZXgiLCJ0b2dnbGVibG9jayIsImJsIiwiZ2V0RWxlbWVudEJ5SWQiLCJzdHlsZSIsImRpc3BsYXkiLCJ0b2dnbGVBbGwiLCJhY3Rpb24iLCJibGtzIiwiaSIsImluc2VydFRleHQiLCJkb2NPYmoiLCJmaWVsZE5hbWUiLCJmaWVsZCIsImZpbmRGaWVsZCIsImZvcm1zIiwiaiIsImVsZW1lbnRzIiwic2VsZWN0aW9uIiwiZm9jdXMiLCJjcmVhdGVSYW5nZSIsInNlbGVjdGlvblN0YXJ0Iiwic3RhcnRQb3MiLCJlbmRQb3MiLCJzZWxlY3Rpb25FbmQiLCJzdWJzdHJpbmciLCJhamF4RXJyb3JIYW5kbGVycyIsImFqYXhTdWNjZXNzSGFuZGxlcnMiLCJhamF4RW5hYmxlZCIsImpRdWVyeSIsImFqYXhDdXJyZW50QmFzZSIsIiQiLCJlcSIsImF0dHIiLCJhamF4VXNlZCIsImFqYXhFcnJvciIsImFqYXhTZW5kIiwic2V0dGluZ3MiLCJtZXRob2QiLCJ0b1VwcGVyQ2FzZSIsImZvcm1JZCIsInNlcmlhbGl6ZSIsInNlcCIsImluZGV4T2YiLCJhamF4IiwidHlwZSIsImJlZm9yZVNlbmQiLCJub25zaG93bG9hZGluZyIsImRpdklkIiwid2lkdGgiLCJoZWlnaHQiLCJjc3MiLCJtc2ciLCJub25zaG93ZmFkZWluIiwiaHRtbCIsImhpZGUiLCJmYWRlSW4iLCJmdW5jIiwiYWxlcnQiLCJhamF4UGFnZUxvYWQiLCJoYXNoIiwibSIsIm1hdGNoIiwiZGVjb2RlVVJJQ29tcG9uZW50Iiwic3Vic3RyIiwiYWpheEZvcm1Mb2FkIiwiYWpheE1ha2VIYXNoIiwicmVsIiwiZm9ybURhdGEiLCJocmVmQmFzZSIsImJpbmRIYW5kbGVycyIsImNsaWNrIiwib24iLCJwcmVwZW5kIiwianFtIiwibW9kYWwiLCJvbkxvYWQiLCJqcW1TaG93IiwiaXMiLCJqcW1IaWRlIiwicmVhZHkiXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsSUFBQUEseUJBQUEsTUFFQSxXQVdBQSx5QkFBQSxNQUtBQyxHQUVBQyxHQUFBLEtBRUFDLElBQUEsRUFFQSxXQUFBQyxHQUNBQyxNQUFBSixFQUFBLElBQUFLLEdBQ0EsQ0FTQSxHQUFBQyxDQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUNBTixNQUFBSixFQUFBVyxJQUFBSixFQUFBLElBQUFLLEVBQUFKLEVBQUFDLEVBQUFDLElBQ0FOLE1BQUFTLEdBQ0EsQ0FNQSxNQUFBQyxDQUFBUCxHQUNBSCxNQUFBSixFQUFBZSxPQUFBUixHQUNBSCxNQUFBUyxHQUNBLENBRUEsRUFBQUEsR0FDQSxJQUFBRyxFQUFBLEVBQ0FaLE1BQUFKLEVBQUFpQixTQUFBLENBQUFDLEVBQUFDLEVBQUFDLE1BQ0EsSUFBQUosS0FBQUUsRUFBQVIsV0FDQU0sRUFBQUUsRUFBQVIsUUFDQSxJQUdBLE9BQUFOLE1BQUFILElBQ0FvQixPQUFBQyxhQUFBbEIsTUFBQUgsR0FDQUcsTUFBQUgsRUFBQSxNQUdBRyxNQUFBSCxFQUFBb0IsT0FBQUUsWUFBQSxLQUFBbkIsTUFBQW9CLEdBQUEsT0FBQVIsRUFDQSxDQUVBLEVBQUFTLEdBRUEsQ0FFQSxFQUFBRCxHQUNBLEdBQUFwQixNQUFBRixF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LGlCQUFBcEIsRUFBQSxlQUFBbUIsU0FBQSxPQUNBLElBQ0FuQixFQUFBLGVBQUE4QyxXQUNBLEVBSUEsSUFHQTlDLEVBQUF4SCxRQUFBaUssR0FBQSx5QkFDQWIsYUFBQXBKLE9BQUF1RixTQUFBOEQsS0FBQTdFLFFBQUEsU0FDQSxJQUVBZ0QsRUFBQSxRQUFBeUMsR0FBQSxrQ0FDQSxPQUFBekMsRUFBQSxlQUFBK0MsR0FBQSxnQkFFQS9DLEVBQUEsZUFBQWdELFVBQ0FoRCxFQUFBLGVBQUEvSCxVQUNBLEVBTUEsSUFFQSxDQUVBLG9CQUFBNkgsUUFDQUUsRUFBQWpGLFVBQUFrSSxPQUFBLFdBRUFwRCxhQUNBLElBQUFySCxPQUFBdUYsU0FBQThELE1BQ0FELGFBQUFwSixPQUFBdUYsU0FBQThELEtBQUE3RSxRQUFBLFVBSUF1RixjQUNBLElBR0EvSixPQUFBOEQsS0FBQSIsImZpbGUiOiJiYXNlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImxldCBDb3RvbnRpUGVyaW9kaWNhbFJlcXVlc3QgPSBudWxsO1xyXG5cclxuKGZ1bmN0aW9uICgpIHtcclxuICAgIC8qKlxyXG4gICAgICogQ2FsbGJhY2sgZm9yIENvdG9udGlQZXJpb2RpY2FsUmVxdWVzdC5hZGQoKVxyXG4gICAgICpcclxuICAgICAqIEBjYWxsYmFjayBhZGRQZXJpb2RpY2FsUmVxdWVzdENhbGxiYWNrXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcmVzdWx0IFJlc3VsdCBvYmplY3RcclxuICAgICAqL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUGVyaW9kaWNhbCByZXF1ZXN0IGNsYXNzXHJcbiAgICAgKi9cclxuICAgIENvdG9udGlQZXJpb2RpY2FsUmVxdWVzdCA9IGNsYXNzICB7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtNYXA8c3RyaW5nLCBSZXF1ZXN0SXRlbT59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgI3JlcXVlc3RzUmVnaXN0cnk7XHJcblxyXG4gICAgICAgICNleGVjdXRpb25UaW1lT3V0SWQgPSBudWxsO1xyXG5cclxuICAgICAgICAjZXhlY3V0aW5nID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgICAgICB0aGlzLiNyZXF1ZXN0c1JlZ2lzdHJ5ID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQWRkIHBlcmlvZGljYWwgcmVxdWVzdCB0byByZWdpc3RyeS5cclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgVW5pcXVlIGNvZGUuIFdpbGwgYmUgcGFzc2VkIHRvIHNlcnZlciB3aXRoIG90aGVyIHBhcmFtZXRlcnNcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zXHJcbiAgICAgICAgICogQHBhcmFtIHthZGRQZXJpb2RpY2FsUmVxdWVzdENhbGxiYWNrfSBjYWxsYmFja1xyXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lb3V0IEluIHNlY29uZHNcclxuICAgICAgICAgKi9cclxuICAgICAgICBhZGQoaWQsIHBhcmFtcywgY2FsbGJhY2ssIHRpbWVvdXQpIHtcclxuICAgICAgICAgICAgdGhpcy4jcmVxdWVzdHNSZWdpc3RyeS5zZXQoaWQsIG5ldyBSZXF1ZXN0SXRlbShwYXJhbXMsIGNhbGxiYWNrLCB0aW1lb3V0KSk7XHJcbiAgICAgICAgICAgIHRoaXMuI3NldEV4ZWN1dGlvbigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVtb3ZlIHBlcmlvZGljYWwgcmVxdWVzdCBmcm9tIHJlZ2lzdHJ5LlxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBVbmlxdWUgY29kZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHJlbW92ZShpZCkge1xyXG4gICAgICAgICAgICB0aGlzLiNyZXF1ZXN0c1JlZ2lzdHJ5LmRlbGV0ZShpZCk7XHJcbiAgICAgICAgICAgIHRoaXMuI3NldEV4ZWN1dGlvbigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI3NldEV4ZWN1dGlvbigpIHtcclxuICAgICAgICAgICAgbGV0IG1pblRpbWVvdXQgPSAwO1xyXG4gICAgICAgICAgICB0aGlzLiNyZXF1ZXN0c1JlZ2lzdHJ5LmZvckVhY2goKGl0ZW0sIGtleSwgbWFwKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAobWluVGltZW91dCA9PT0gMCB8fCBtaW5UaW1lb3V0ID4gaXRlbS50aW1lb3V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWluVGltZW91dCA9IGl0ZW0udGltZW91dDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy4jZXhlY3V0aW9uVGltZU91dElkICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuI2V4ZWN1dGlvblRpbWVPdXRJZCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiNleGVjdXRpb25UaW1lT3V0SWQgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLiNleGVjdXRpb25UaW1lT3V0SWQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7dGhpcy4jZXhlY3V0ZSgpfSwgbWluVGltZW91dCAqIDEwMDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgI3NldEV4ZWN1dGluZygpIHtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAjZXhlY3V0ZSgpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuI2V4ZWN1dGluZykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLiNleGVjdXRpbmcgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0V4ZWN1dGUgcmVxdWVzdCBzdGFydCcpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICAgIGxldCBjdXJyZW50RGF0ZSA9IG51bGw7XHJcbiAgICAgICAgICAgIGRvIHtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnREYXRlID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgfSB3aGlsZSAoY3VycmVudERhdGUgLSBkYXRlIDwgMjAwMCk7XHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRXhlY3V0ZSByZXF1ZXN0IGVuZCcpO1xyXG5cclxuICAgICAgICAgICAgLy90aGlzLiNleGVjdXRpbmcgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2xhc3MgUmVxdWVzdEl0ZW0ge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3R9XHJcbiAgICAgICAgICogQHB1YmxpY1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHBhcmFtcztcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge2FkZFBlcmlvZGljYWxSZXF1ZXN0Q2FsbGJhY2t9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY2FsbGJhY2s7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGltZW91dDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtc1xyXG4gICAgICAgICAqIEBwYXJhbSB7YWRkUGVyaW9kaWNhbFJlcXVlc3RDYWxsYmFja30gY2FsbGJhY2tcclxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gdGltZW91dCBpbiBzZWNvbmRzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3RydWN0b3IocGFyYW1zLCBjYWxsYmFjaywgdGltZW91dCkge1xyXG4gICAgICAgICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcclxuICAgICAgICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVvdXQgPSB0aW1lb3V0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoKTtcclxuIiwiLyoqXHJcbiAqIEJhc2UgQ290b250aSBjbGFzc1xyXG4gKi9cclxuY2xhc3MgQ290b250aUFwcGxpY2F0aW9uXHJcbntcclxuICAgIC8qKlxyXG4gICAgICogQHR5cGUge0NvdG9udGlQZXJpb2RpY2FsUmVxdWVzdH1cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgICNwZXJpb2RpY2FsUmVxdWVzdCA9IG51bGw7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMb2FkIGRhdGEgZnJvbSAvaW5kZXgucGhwP2E9Z2V0XHJcbiAgICAgKiBDYW4gYmUgdXNlZnVsLCBmb3IgZXhhbXBsZSB3aGVuIGl0IGlzIG5lZWRlZCB0byBsb2FkIHNvbWUgZHluYW1pYyBjb250ZW50IHRvIGNhY2hlZCBwYWdlXHJcbiAgICAgKlxyXG4gICAgICogRXhhbXBsZTpcclxuICAgICAqIGNvdC5sb2FkRGF0YShbJ2NhcHRjaGEnLCAneCddKS50aGVuKHJlc3VsdCA9PiB7XHJcbiAgICAgKiAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xyXG4gICAgICogfSk7XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHdoYXQgQXJyYXkgb3Igc3RyaW5nLiBEYXRhIHRvIGxvYWQuIEZvciBleGFtcGxlLCBbJ2NhcHRjaGEnLCAneCddICh4IC0gYW50aSBYU1MgcGFyYW1ldGVyIHZhbHVlKVxyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8e30+fVxyXG4gICAgICovXHJcbiAgICBhc3luYyBsb2FkRGF0YSh3aGF0KSB7XHJcbiAgICAgICAgaWYgKCF3aGF0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7fTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmxvYWRlZERhdGEgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRlZERhdGEgPSB7fTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBkYXRhVG9Mb2FkID0gW107XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2Ygd2hhdCA9PT0gJ3N0cmluZycgfHwgd2hhdCBpbnN0YW5jZW9mIFN0cmluZykge1xyXG4gICAgICAgICAgICB3aGF0ID0gW3doYXRdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChsZXQgaXRlbSBvZiB3aGF0KSB7XHJcbiAgICAgICAgICAgIGlmICghKGl0ZW0gaW4gdGhpcy5sb2FkZWREYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgZGF0YVRvTG9hZC5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZGF0YVRvTG9hZC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIEB0b2RvIGNoYW5nZSB0byBzeXN0ZW0gY29udHJvbGxlciB3aGVuIGl0IHdpbGwgYmUgaW1wbGVtZW50ZWRcclxuICAgICAgICAgICAgbGV0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe2E6ICdnZXQnfSk7XHJcblxyXG4gICAgICAgICAgICBkYXRhVG9Mb2FkLmZvckVhY2goKGl0ZW0sIGluZGV4LCBhcnJheSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zLmFwcGVuZCgnZGF0YVsnICsgaW5kZXggKyAnXScsIGl0ZW0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcGFyYW1zLmFwcGVuZCgnX2FqYXgnLCAxKTtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdpbmRleC5waHA/JyArIHBhcmFtcy50b1N0cmluZygpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlRGF0YS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHJlc3BvbnNlRGF0YS5kYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRlZERhdGFba2V5XSA9IHJlc3BvbnNlRGF0YS5kYXRhW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBIVFRQIGVycm9yXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBSZXF1ZXN0IGVycm9yXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCByZXN1bHQgPSB7fTtcclxuICAgICAgICBmb3IgKGxldCBpdGVtIG9mIHdoYXQpIHtcclxuICAgICAgICAgICAgaWYgKChpdGVtIGluIHRoaXMubG9hZGVkRGF0YSkpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdFtpdGVtXSA9IHRoaXMubG9hZGVkRGF0YVtpdGVtXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIExvYWQgY2FwdGNoYSB2aWEgYWpheC4gVXNlZCBvbiBjYWNoZWQgcGFnZXMuXHJcbiAgICAgKi9cclxuICAgIGxvYWRDYXB0Y2hhKCkge1xyXG4gICAgICAgIHRoaXMubG9hZERhdGEoWydjYXB0Y2hhJywgJ3gnXSkudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICBsZXQgY2FwdGNoYUVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhcHRjaGEtcGxhY2UtaG9sZGVyJyk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGVsZW1lbnQgb2YgY2FwdGNoYUVsZW1lbnRzKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9IHJlc3VsdC5jYXB0Y2hhO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5leGVjdXRlU2NyaXB0RWxlbWVudHMoZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2NhcHRjaGEtcGxhY2UtaG9sZGVyJywgJ2xvYWRpbmcnKTtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnY2FwdGNoYScpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGZvcm0gPSBlbGVtZW50LmNsb3Nlc3QoJ2Zvcm0nKTtcclxuICAgICAgICAgICAgICAgIGlmIChmb3JtICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGlucHV0WCA9IGZvcm0ucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1cImhpZGRlblwiXVtuYW1lPVwieFwiXScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dFggIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRYLnNldEF0dHJpYnV0ZSgndmFsdWUnLCByZXN1bHQueCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJucyB7Q290b250aVBlcmlvZGljYWxSZXF1ZXN0fVxyXG4gICAgICovXHJcbiAgICBnZXRQZXJpb2RpY2FsUmVxdWVzdCgpIHtcclxuICAgICAgICBpZiAodGhpcy4jcGVyaW9kaWNhbFJlcXVlc3QgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy4jcGVyaW9kaWNhbFJlcXVlc3QgPSBuZXcgQ290b250aVBlcmlvZGljYWxSZXF1ZXN0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLiNwZXJpb2RpY2FsUmVxdWVzdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIElmIHlvdSBhcHBlbmQgPHNjcmlwdD4gdGFncyB0byB0aGUgZWxlbWVudHMgb2YgdGhlIGZpbmlzaGVkIERPTSBkb2N1bWVudCwgdGhleSB3aWxsIG5vdCBiZSBleGVjdXRlZCBhdXRvbWF0aWNhbGx5LlxyXG4gICAgICogVGhlIG1ldGhvZCBleGVjdXRlcyA8c2NyaXB0PiBzY3JpcHRzIG5lc3RlZCBpbiB0aGUgc3BlY2lmaWVkIGVsZW1lbnRcclxuICAgICAqIEBwYXJhbSBjb250YWluZXJFbGVtZW50IE5vZGVcclxuICAgICAqL1xyXG4gICAgZXhlY3V0ZVNjcmlwdEVsZW1lbnRzKGNvbnRhaW5lckVsZW1lbnQpIHtcclxuICAgICAgICBjb25zdCBzY3JpcHRFbGVtZW50cyA9IGNvbnRhaW5lckVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnc2NyaXB0Jyk7XHJcblxyXG4gICAgICAgIEFycmF5LmZyb20oc2NyaXB0RWxlbWVudHMpLmZvckVhY2goKHNjcmlwdEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY2xvbmVkRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG4gICAgICAgICAgICBBcnJheS5mcm9tKHNjcmlwdEVsZW1lbnQuYXR0cmlidXRlcykuZm9yRWFjaCgoYXR0cmlidXRlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjbG9uZWRFbGVtZW50LnNldEF0dHJpYnV0ZShhdHRyaWJ1dGUubmFtZSwgYXR0cmlidXRlLnZhbHVlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNsb25lZEVsZW1lbnQudGV4dCA9IHNjcmlwdEVsZW1lbnQudGV4dDtcclxuICAgICAgICAgICAgc2NyaXB0RWxlbWVudC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChjbG9uZWRFbGVtZW50LCBzY3JpcHRFbGVtZW50KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxubGV0IGNvdCA9IG5ldyBDb3RvbnRpQXBwbGljYXRpb24oKTtcclxuIiwiZnVuY3Rpb24gZW5jb2RlVVJJZml4KHN0cikge1xyXG5cdC8vIHRvIHByZXZlbnQgdHdpY2UgZW5jb2RpbmdcclxuXHQvLyBhbmQgZml4ICdbJywnXScgc2lnbnMgdG8gZm9sbG93IFJGQzM5ODYgKHNlY3Rpb24tMy4yLjIpXHJcblx0cmV0dXJuIGVuY29kZVVSSShkZWNvZGVVUkkoc3RyKSkucmVwbGFjZSgvJTVCL2csICdbJykucmVwbGFjZSgvJTVEL2csICddJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEJhc2VIcmVmKCkge1xyXG5cdHZhciBocmVmID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2Jhc2UnKVswXS5ocmVmO1xyXG5cdGlmIChocmVmID09IG51bGwpIHtcclxuXHRcdHJldHVybiAnLyc7XHJcblx0fSBlbHNlIHtcclxuXHRcdHJldHVybiBocmVmO1xyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gcG9wdXAoY29kZSwgdywgaCl7XHJcbiAgICB3aW5kb3cub3BlbihnZXRCYXNlSHJlZigpICsgJ2luZGV4LnBocD9vPScgKyBjb2RlLCAnJywgJ3Rvb2xiYXI9MCxsb2NhdGlvbj0wLGRpcmVjdG9yaWVzPTAsbWVudUJhcj0wLHJlc2l6YWJsZT0wLHNjcm9sbGJhcnM9eWVzLHdpZHRoPScgKyB3ICsgJyxoZWlnaHQ9JyArIGggKyAnLGxlZnQ9MzIsdG9wPTE2Jyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAdG9kbyBtb3ZlIHRvIHBmcyBtb2R1bGVcclxuICovXHJcbmZ1bmN0aW9uIHBmcyhpZCwgYzEsIGMyLCBwYXJzZXIpe1xyXG4gICAgd2luZG93Lm9wZW4oXHJcblx0XHRnZXRCYXNlSHJlZigpICsgJ2luZGV4LnBocD9lPXBmcyZ1c2VyaWQ9JyArIGlkICsgJyZjMT0nICsgYzEgKyAnJmMyPScgKyBjMiArICcmcGFyc2VyPScgKyBwYXJzZXIsXHJcblx0XHQnUEZTJyxcclxuXHRcdCdzdGF0dXM9MSwgdG9vbGJhcj0wLGxvY2F0aW9uPTAsZGlyZWN0b3JpZXM9MCxtZW51QmFyPTAscmVzaXphYmxlPTEsc2Nyb2xsYmFycz15ZXMsd2lkdGg9NzU0LGhlaWdodD01MTIsbGVmdD0zMix0b3A9MTYnXHJcblx0KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVkaXJlY3QodXJsKXtcclxuICAgIGxvY2F0aW9uLmhyZWYgPSB1cmwub3B0aW9uc1t1cmwuc2VsZWN0ZWRJbmRleF0udmFsdWU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRvZ2dsZWJsb2NrKGlkKXtcclxuICAgIHZhciBibCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcclxuICAgIGlmIChibC5zdHlsZS5kaXNwbGF5ID09ICdub25lJykge1xyXG4gICAgICAgIGJsLnN0eWxlLmRpc3BsYXkgPSAnJztcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGJsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICB9XHJcblx0cmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0b2dnbGVBbGwoYWN0aW9uKSB7XHJcblx0dmFyIGJsa3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbaWRePVwiYmxrX1wiXScpO1xyXG5cdGZvciAoaSA9IDA7IGkgPCBibGtzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRpZiAoYWN0aW9uID09ICdoaWRlJykge1xyXG5cdFx0XHRibGtzW2ldLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcblx0XHR9IGVsc2UgaWYgKGFjdGlvbiA9PSAnc2hvdycpIHtcclxuXHRcdFx0Ymxrc1tpXS5zdHlsZS5kaXNwbGF5ID0gJ3RhYmxlLXJvdy1ncm91cCc7XHJcblx0XHR9XHJcblx0fVxyXG5cdHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuLy8gSW5zZXJ0cyB0ZXh0IGludG8gdGV4dGFyZWEgYXQgY3Vyc29yIHBvc2l0aW9uXHJcbmZ1bmN0aW9uIGluc2VydFRleHQoZG9jT2JqLCBmaWVsZE5hbWUsIHZhbHVlKSB7XHJcblx0dmFyIGZpZWxkID0gbnVsbDtcclxuXHRpZiAoIWRvY09iaikge1xyXG5cdFx0ZG9jT2JqID0gZG9jdW1lbnQ7XHJcblx0fVxyXG5cdC8vIEZpbmQgdGhlIGZpZWxkIGluIHRoZSBkb2NPYmpcclxuXHRmaW5kRmllbGQ6XHJcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkb2NPYmouZm9ybXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdGZvciAodmFyIGogPSAwOyBqIDwgZG9jT2JqLmZvcm1zW2ldLmVsZW1lbnRzLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdGlmIChkb2NPYmouZm9ybXNbaV0uZWxlbWVudHNbal0ubmFtZSA9PSBmaWVsZE5hbWUpIHtcclxuXHRcdFx0XHRmaWVsZCA9IGRvY09iai5mb3Jtc1tpXS5lbGVtZW50c1tqXTtcclxuXHRcdFx0XHRicmVhayBmaW5kRmllbGQ7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblx0aWYgKCFmaWVsZCkge1xyXG5cdFx0cmV0dXJuIGZhbHNlO1xyXG5cdH1cclxuXHJcblx0Ly8gSW5zZXJ0IHRoZSB0ZXh0XHJcblx0aWYgKGRvY09iai5zZWxlY3Rpb24pIHtcclxuXHRcdC8vIE1TSUUgYW5kIE9wZXJhXHJcblx0XHRmaWVsZC5mb2N1cygpO1xyXG5cdFx0dmFyIHNlbCA9IGRvY09iai5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTtcclxuXHRcdHNlbC50ZXh0ID0gdmFsdWU7XHJcblx0fSBlbHNlIGlmIChmaWVsZC5zZWxlY3Rpb25TdGFydCB8fCBmaWVsZC5zZWxlY3Rpb25TdGFydCA9PSAwKSB7XHJcblx0XHQvLyBNb3ppbGxhXHJcblx0XHR2YXIgc3RhcnRQb3MgPSBmaWVsZC5zZWxlY3Rpb25TdGFydDtcclxuXHRcdHZhciBlbmRQb3MgPSBmaWVsZC5zZWxlY3Rpb25FbmQ7XHJcblx0XHRmaWVsZC52YWx1ZSA9IGZpZWxkLnZhbHVlLnN1YnN0cmluZygwLCBzdGFydFBvcykgKyB2YWx1ZSArIGZpZWxkLnZhbHVlLnN1YnN0cmluZyhlbmRQb3MsIGZpZWxkLnZhbHVlLmxlbmd0aCk7XHJcblx0fSBlbHNlIHtcclxuXHRcdGZpZWxkLnZhbHVlICs9IHZhbHVlO1xyXG5cdH1cclxuXHRyZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuLy8gQXJyYXkgb2YgYWpheCBlcnJvciBoYW5kbGVyc1xyXG4vLyBFeGFtcGxlIG9mIHVzZTpcclxuLy8gYWpheEVycm9ySGFuZGxlcnMucHVzaCh7ZnVuYzogbXlFcnJvckhhbmRsZXJ9KTtcclxuLy8gYWpheFN1Y2Nlc3NIYW5kbGVycy5wdXNoKHtmdW5jOiBteVN1Y2Nlc3NIYW5kbGVyfSk7XHJcbnZhciBhamF4RXJyb3JIYW5kbGVycyA9IG5ldyBBcnJheSgpO1xyXG52YXIgYWpheFN1Y2Nlc3NIYW5kbGVycyA9IG5ldyBBcnJheSgpO1xyXG4vLyBBSkFYIGVuYWJsZW1lbnQgZGVmYXVsdHMgdG8gZmFsc2VcclxudmFyIGFqYXhFbmFibGVkID0gZmFsc2U7XHJcbi8vIFJlcXVpcmVkIHRvIGNhbGN1bGF0ZSBwYXRoc1xyXG5pZiAodHlwZW9mIGpRdWVyeSAhPSAndW5kZWZpbmVkJykge1xyXG5cdHZhciBhamF4Q3VycmVudEJhc2UgPSBsb2NhdGlvbi5ocmVmLnJlcGxhY2UoJCgnYmFzZScpLmVxKDApLmF0dHIoJ2hyZWYnKSwgJycpLnJlcGxhY2UoL1xcPy4qJC8sICcnKS5yZXBsYWNlKC8jLiokLywgJycpO1xyXG59XHJcbi8vIFRoaXMgZmxhZyBpbmRpY2F0ZXMgdGhhdCBBSkFYK2hpc3RvcnkgaGFzIGJlZW4gdXNlZCBvbiB0aGlzIHBhZ2VcclxuLy8gSXQgbWVhbnMgdGhhdCBcIiNcIiBvciBob21lIGxpbmsgc2hvdWxkIGJlIGxvYWRlZCB2aWEgYWpheCB0b29cclxudmFyIGFqYXhVc2VkID0gZmFsc2U7XHJcbi8vIEdsb2JhbCBmbGFnIHRvIGxldCBldmVyeWJvZHkga25vdyB0aGF0IEFKQVggaGFzIGZhaWxlZFxyXG52YXIgYWpheEVycm9yID0gZmFsc2U7XHJcblxyXG4vKipcclxuICogQUpBWCBoZWxwZXIgZnVuY3Rpb25cclxuICogQHBhcmFtIHtoYXNofSBzZXR0aW5ncyBBIGhhc2h0YWJsZSB3aXRoIHNldHRpbmdzXHJcbiAqIEByZXR1cm4gRkFMU0Ugb24gc3VjY2Vzc2Z1bCBBSkFYIGNhbGwsIFRSVUUgb24gZXJyb3IgdG8gY29udGludWUgaW5cclxuICogc3luY2hyb25vdXMgbW9kZVxyXG4gKiBAdHlwZSBib29sXHJcbiAqL1xyXG5mdW5jdGlvbiBhamF4U2VuZChzZXR0aW5ncykge1xyXG5cdHZhciBtZXRob2QgPSBzZXR0aW5ncy5tZXRob2QgPyBzZXR0aW5ncy5tZXRob2QudG9VcHBlckNhc2UoKSA6ICdHRVQnO1xyXG5cdHZhciBkYXRhID0gc2V0dGluZ3MuZGF0YSB8fCAnJztcclxuXHR2YXIgdXJsID0gc2V0dGluZ3MudXJsIHx8ICQoJyMnICsgc2V0dGluZ3MuZm9ybUlkKS5hdHRyKCdhY3Rpb24nKTtcclxuXHRpZiAobWV0aG9kID09PSAnUE9TVCcpIHtcclxuXHRcdGRhdGEgKz0gJyYnICsgJCgnIycgKyBzZXR0aW5ncy5mb3JtSWQpLnNlcmlhbGl6ZSgpO1xyXG5cdH0gZWxzZSBpZiAoc2V0dGluZ3MuZm9ybUlkKSB7XHJcblx0XHR2YXIgc2VwID0gdXJsLmluZGV4T2YoJz8nKSA+IDAgPyAnJicgOiAnPyc7XHJcblx0XHR1cmwgKz0gc2VwICsgJCgnIycgKyBzZXR0aW5ncy5mb3JtSWQpLnNlcmlhbGl6ZSgpO1xyXG5cdH1cclxuXHQkLmFqYXgoe1xyXG5cdFx0dHlwZTogbWV0aG9kLFxyXG5cdFx0dXJsOiBlbmNvZGVVUklmaXgodXJsKSxcclxuXHRcdGRhdGE6IGRhdGEsXHJcblx0XHRiZWZvcmVTZW5kOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCFzZXR0aW5ncy5ub25zaG93bG9hZGluZykge1xyXG5cdFx0XHRcdCQoJyMnICsgc2V0dGluZ3MuZGl2SWQpXHJcblx0XHRcdFx0XHQuYXBwZW5kKCc8c3BhbiBzdHlsZT1cInBvc2l0aW9uOmFic29sdXRlOyBsZWZ0OicgKyAoJCgnIycgKyBzZXR0aW5ncy5kaXZJZCkud2lkdGgoKS8yIC0gMTEwKSArICdweDt0b3A6JyArICgkKCcjJyArIHNldHRpbmdzLmRpdklkKS5oZWlnaHQoKS8yIC0gOSkgKyAncHg7XCIgY2xhc3M9XCJsb2FkaW5nXCIgaWQ9XCJsb2FkaW5nXCI+PGltZyBzcmM9XCIuL2ltYWdlcy9zcGlubmVyLmdpZlwiIGFsdD1cImxvYWRpbmdcIi8+PC9zcGFuPicpLmNzcygncG9zaXRpb24nLCAncmVsYXRpdmUnKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKG1zZykge1xyXG5cdFx0XHRpZiAoIXNldHRpbmdzLm5vbnNob3dsb2FkaW5nKSB7XHJcblx0XHRcdFx0JCgnI2xvYWRpbmcnKS5yZW1vdmUoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIXNldHRpbmdzLm5vbnNob3dmYWRlaW4pIHtcclxuXHRcdFx0XHQkKCcjJyArIHNldHRpbmdzLmRpdklkKS5oaWRlKCkuaHRtbChtc2cpLmZhZGVJbig1MDApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdCQoJyMnICsgc2V0dGluZ3MuZGl2SWQpLmh0bWwobXNnKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFqYXhTdWNjZXNzSGFuZGxlcnMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRpZihhamF4U3VjY2Vzc0hhbmRsZXJzW2ldLmZ1bmMpXHJcblx0XHRcdFx0XHRhamF4U3VjY2Vzc0hhbmRsZXJzW2ldLmZ1bmMobXNnKTtcclxuXHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRhamF4U3VjY2Vzc0hhbmRsZXJzW2ldKG1zZyk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRlcnJvcjogZnVuY3Rpb24obXNnKSB7XHJcblx0XHRcdGlmICghc2V0dGluZ3Mubm9uc2hvd2xvYWRpbmcpIHtcclxuXHRcdFx0XHQkKCcjbG9hZGluZycpLnJlbW92ZSgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICghc2V0dGluZ3Mubm9uc2hvd2ZhZGVpbikge1xyXG5cdFx0XHRcdCQoJyMnICsgc2V0dGluZ3MuZGl2SWQpLmhpZGUoKS5odG1sKG1zZykuZmFkZUluKDUwMCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0JCgnIycgKyBzZXR0aW5ncy5kaXZJZCkuaHRtbChtc2cpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmIChhamF4RXJyb3JIYW5kbGVycy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhamF4RXJyb3JIYW5kbGVycy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdFx0aWYgKGFqYXhFcnJvckhhbmRsZXJzW2ldLmZ1bmMpIHtcclxuXHRcdFx0XHRcdFx0YWpheEVycm9ySGFuZGxlcnNbaV0uZnVuYyhtc2cpO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0YWpheEVycm9ySGFuZGxlcnNbaV0obXNnKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0YWxlcnQoJ0FKQVggZXJyb3I6ICcgKyBtc2cpO1xyXG5cdFx0XHRcdGFqYXhFcnJvciA9IHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9KTtcclxuXHRyZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBSkFYIHN1YnBhZ2UgbG9hZGVyIHdpdGggaGlzdG9yeSBzdXBwb3J0XHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBoYXNoIEEgaGFzaC1hZGRyZXNzIHN0cmluZ1xyXG4gKiBAcmV0dXJuIEZBTFNFIG9uIHN1Y2Nlc3NmdWwgQUpBWCBjYWxsLCBUUlVFIG9uIGVycm9yIHRvIGNvbnRpbnVlIGluXHJcbiAqIHN5bmNocm9ub3VzIG1vZGVcclxuICogQHR5cGUgYm9vbFxyXG4gKi9cclxuZnVuY3Rpb24gYWpheFBhZ2VMb2FkKGhhc2gpIHtcclxuICAgIGlmIChoYXNoICE9PSAnJykge1xyXG5cdFx0aGFzaC5yZXBsYWNlKC9eIy8sICcnKTtcclxuXHR9XHJcblx0dmFyIG0gPSBoYXNoLm1hdGNoKC9eZ2V0KC0uKj8pPzsoLiopJC8pO1xyXG5cdGlmIChtKSB7XHJcblx0XHQvLyBhamF4IGJvb2ttYXJrXHJcbiAgICAgICAgdmFyIHVybCA9IG1bMl0uaW5kZXhPZignOycpID4gMCA/IG1bMl0ucmVwbGFjZSgnOycsICc/JykgOiBhamF4Q3VycmVudEJhc2UgKyAnPycgKyBkZWNvZGVVUklDb21wb25lbnQobVsyXSk7XHJcblx0XHRhamF4VXNlZCA9IHRydWU7XHJcblx0XHRyZXR1cm4gYWpheFNlbmQoe1xyXG5cdFx0XHRtZXRob2Q6ICdHRVQnLFxyXG5cdFx0XHR1cmw6IHVybCxcclxuXHRcdFx0ZGl2SWQ6IG1bMV0gPyBtWzFdLnN1YnN0cigxKSA6ICdhamF4QmxvY2snXHJcblx0XHR9KTtcclxuXHR9IGVsc2UgaWYgKGhhc2ggPT09ICcnICYmIGFqYXhVc2VkKSB7XHJcblx0XHQvLyBhamF4IGhvbWVcclxuXHRcdHJldHVybiBhamF4U2VuZCAoe1xyXG5cdFx0XHR1cmw6IGxvY2F0aW9uLmhyZWYucmVwbGFjZSgvIy4qJC8sICcnKSxcclxuXHRcdFx0ZGl2SWQ6ICdhamF4QmxvY2snXHJcblx0XHR9KTtcclxuXHR9XHJcblx0cmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBSkFYIHN1YmZvcm0gbG9hZGVyIHdpdGhvdXQgaGlzdG9yeSB0cmFja2luZ1xyXG4gKiBAcGFyYW0ge3N0cmluZ30gaGFzaCBBIGhhc2gtYWRkcmVzcyBzdHJpbmdcclxuICogQHBhcmFtIHtzdHJpbmd9IGZvcm1JZCBUYXJnZXQgZm9ybSBpZCBhdHRyaWJ1dGVcclxuICogQHJldHVybiBGQUxTRSBvbiBzdWNjZXNzZnVsIEFKQVggY2FsbCwgVFJVRSBvbiBlcnJvciB0byBjb250aW51ZSBpblxyXG4gKiBzeW5jaHJvbm91cyBtb2RlXHJcbiAqIEB0eXBlIGJvb2xcclxuICovXHJcbmZ1bmN0aW9uIGFqYXhGb3JtTG9hZChoYXNoLCBmb3JtSWQpIHtcclxuXHR2YXIgbSA9IGhhc2gubWF0Y2goL14oZ2V0fHBvc3QpKC0uKj8pPzsoLiopJC8pO1xyXG5cdGlmIChtKSB7XHJcblx0XHQvLyBhamF4IGJvb2ttYXJrXHJcblx0XHR2YXIgdXJsID0gbVszXS5pbmRleE9mKCc7JykgPiAwID8gbVszXS5yZXBsYWNlKCc7JywgJz8nKSA6IGFqYXhDdXJyZW50QmFzZSArICc/JyArIG1bM107XHJcblx0XHRhamF4VXNlZCA9IHRydWU7XHJcblx0XHRyZXR1cm4gYWpheFNlbmQoe1xyXG5cdFx0XHRtZXRob2Q6IG1bMV0udG9VcHBlckNhc2UoKSxcclxuXHRcdFx0dXJsOiB1cmwsXHJcblx0XHRcdGRpdklkOiBtWzJdID8gbVsyXS5zdWJzdHIoMSkgOiAnYWpheEJsb2NrJyxcclxuXHRcdFx0Zm9ybUlkOiBmb3JtSWRcclxuXHRcdH0pO1xyXG5cdH1cclxuXHRyZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENvbnN0cnVjdHMgYWpheGFibGUgaGFzaCBzdHJpbmdcclxuICogQHBhcmFtIHtzdHJpbmd9IGhyZWYgTGluayBocmVmIG9yIGZvcm0gYWN0aW9uIGF0dHJpYnV0ZVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVsIEFuIGF0dHJpYnV0ZSB2YWx1ZSBwb3NzaWJseSBjb250YWluaW5nIGEgaGFzaCBhZGRyZXNzXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBmb3JtRGF0YSBJcyBwYXNzZWQgZm9yIGZvcm1zIG9ubHksIGlzICdwb3N0JyBmb3IgUE9TVCBmb3Jtc1xyXG4gKiBvciBzZXJpYWxpemVkIGZvcm0gZGF0YSBmb3IgR0VUIGZvcm1zXHJcbiAqIEByZXR1cm4gQSB2YWxpZCBoYXNoLWFkZHJlc3Mgc3RyaW5nXHJcbiAqIEB0eXBlIHN0cmluZ1xyXG4gKi9cclxuZnVuY3Rpb24gYWpheE1ha2VIYXNoKGhyZWYsIHJlbCwgZm9ybURhdGEpIHtcclxuXHR2YXIgaGFzaCA9IChmb3JtRGF0YSA9PSAncG9zdCcpID8gJ3Bvc3QnIDogJ2dldCc7XHJcblx0dmFyIGhyZWZCYXNlLCBwYXJhbXM7XHJcblx0dmFyIHNlcCA9ICc/JztcclxuXHR2YXIgbSA9IHJlbCA/IHJlbC5tYXRjaCgvKGdldHxwb3N0KSgtW14gO10rKT8oO1xcUyopPy8pIDogZmFsc2U7XHJcblx0aWYgKG0pIHtcclxuXHRcdGhhc2ggPSBtWzFdO1xyXG5cdFx0aWYgKG1bMl0pIHtcclxuXHRcdFx0aGFzaCArPSBtWzJdO1xyXG5cdFx0fVxyXG5cdFx0aWYgKG1bM10pIHtcclxuXHRcdFx0aHJlZiA9IG1bM10uc3Vic3RyKDEpO1xyXG5cdFx0XHRzZXAgID0gJzsnO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRoYXNoICs9ICc7J1xyXG5cdGlmIChocmVmLmluZGV4T2Yoc2VwKSA+IDApIHtcclxuXHRcdGhyZWZCYXNlID0gaHJlZi5zdWJzdHIoMCwgaHJlZi5pbmRleE9mKHNlcCkpO1xyXG5cdFx0cGFyYW1zID0gaHJlZi5zdWJzdHIoaHJlZi5pbmRleE9mKHNlcCkgKyAxKTtcclxuXHRcdGlmIChmb3JtRGF0YSAmJiBmb3JtRGF0YSAhPSAncG9zdCcpIHtcclxuXHRcdFx0cGFyYW1zICs9ICcmJyArIGZvcm1EYXRhO1xyXG5cdFx0fVxyXG5cdH0gZWxzZSB7XHJcblx0XHRocmVmQmFzZSA9IGhyZWY7XHJcblx0XHRwYXJhbXMgPSAnJztcclxuXHRcdGlmIChmb3JtRGF0YSAmJiBmb3JtRGF0YSAhPSAncG9zdCcpIHtcclxuXHRcdFx0cGFyYW1zICs9IHNlcCArIGZvcm1EYXRhO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRoYXNoICs9IGhyZWZCYXNlID09IGFqYXhDdXJyZW50QmFzZSA/IHBhcmFtcyA6IGhyZWZCYXNlICsgJzsnICsgcGFyYW1zO1xyXG5cdHJldHVybiBoYXNoO1xyXG59XHJcblxyXG4vKipcclxuICogU3RhbmRhcmQgZXZlbnQgYmluZGluZ3NcclxuICovXHJcbmZ1bmN0aW9uIGJpbmRIYW5kbGVycygpIHtcclxuXHRpZiAobG9jYXRpb24uaGFzaCA9PSAnI2NvbW1lbnRzJyB8fCBsb2NhdGlvbi5oYXNoLm1hdGNoKC8jY1xcZCsvKSkge1xyXG5cdFx0JCgnLmNvbW1lbnRzJykuY3NzKCdkaXNwbGF5JywgJycpO1xyXG5cdH1cclxuXHQkKCcuY29tbWVudHNfbGluaycpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYoJCgnLmNvbW1lbnRzJykuY3NzKCdkaXNwbGF5JykgPT0gJ25vbmUnKSB7XHJcblx0XHRcdCQoJy5jb21tZW50cycpLmNzcygnZGlzcGxheScsICcnKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdCQoJy5jb21tZW50cycpLmNzcygnZGlzcGxheScsICdub25lJyk7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdGlmKGxvY2F0aW9uLmhyZWYubWF0Y2goLyNjb21tZW50cy8pKSB7XHJcblx0XHQkKCcuY29tbWVudHMnKS5jc3MoJ2Rpc3BsYXknLCAnJyk7XHJcblx0fVxyXG5cclxuXHRpZiAoYWpheEVuYWJsZWQpIHtcclxuXHRcdC8vIEFKQVggYXV0by1oYW5kbGluZ1xyXG5cdFx0JCgnYm9keScpLm9uKCdzdWJtaXQnLCAnZm9ybS5hamF4JywgZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICgkKHRoaXMpLmF0dHIoJ21ldGhvZCcpLnRvVXBwZXJDYXNlKCkgPT0gJ1BPU1QnKSB7XHJcblx0XHRcdFx0YWpheEZvcm1Mb2FkKGFqYXhNYWtlSGFzaCgkKHRoaXMpLmF0dHIoJ2FjdGlvbicpLnJlcGxhY2UoLyMuKiQvLCAnJyksICQodGhpcykuYXR0cignY2xhc3MnKSwgJ3Bvc3QnKSwgJCh0aGlzKS5hdHRyKCdpZCcpKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR3aW5kb3cubG9jYXRpb24uaGFzaCA9IGFqYXhNYWtlSGFzaCgkKHRoaXMpLmF0dHIoJ2FjdGlvbicpLnJlcGxhY2UoLyMuKiQvLCAnJyksICQodGhpcykuYXR0cignY2xhc3MnKSwgJCh0aGlzKS5zZXJpYWxpemUoKSk7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIGFqYXhFcnJvcjtcclxuXHRcdH0pO1xyXG5cdFx0JCgnYm9keScpLm9uKCdjbGljaycsICdhLmFqYXgnLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0d2luZG93LmxvY2F0aW9uLmhhc2ggPSBhamF4TWFrZUhhc2goJCh0aGlzKS5hdHRyKCdocmVmJykucmVwbGFjZSgvIy4qJC8sICcnKSwgJCh0aGlzKS5hdHRyKCdyZWwnKSk7XHJcblx0XHRcdHJldHVybiBhamF4RXJyb3I7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBBSkFYIGFjdGlvbiBjb25maXJtYXRpb25zXHJcblx0XHQkKCdib2R5Jykub24oJ2NsaWNrJywgJ2EuY29uZmlybUxpbmsnLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCQodGhpcykuYXR0cignaHJlZicpLm1hdGNoKC9tZXNzYWdlLis5MjAvaSkpIHtcclxuXHRcdFx0XHRpZiAoJCgnI2NvbmZpcm1Cb3gnKSkge1xyXG5cdFx0XHRcdFx0JCgnI2NvbmZpcm1Cb3gnKS5yZW1vdmUoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0JCgnYm9keScpLnByZXBlbmQoJzxkaXYgaWQ9XCJjb25maXJtQm94XCIgY2xhc3M9XCJqcW1XaW5kb3dcIj48L2Rpdj4nKTtcclxuXHRcdFx0XHQkKCcjY29uZmlybUJveCcpLmpxbSh7YWpheDokKHRoaXMpLmF0dHIoJ2hyZWYnKSxtb2RhbDp0cnVlLG9uTG9hZDpmdW5jdGlvbigpe1xyXG5cdFx0XHRcdFx0JCgnI2NvbmZpcm1Cb3gnKS5jc3MoJ21hcmdpbi1sZWZ0JywgJy0nKygkKCcjY29uZmlybUJveCcpLndpZHRoKCkvMikrJ3B4Jyk7XHJcblx0XHRcdFx0XHQkKCcjY29uZmlybUJveCcpLmNzcygnbWFyZ2luLXRvcCcsICctJysoJCgnI2NvbmZpcm1Cb3gnKS5oZWlnaHQoKS8yKSsncHgnKTtcclxuXHRcdFx0XHR9fSk7XHJcblx0XHRcdFx0JCgnI2NvbmZpcm1Cb3gnKS5qcW1TaG93KCk7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBMaXN0ZW4gdG8gaGFzaCBjaGFuZ2UgZXZlbnRzXHJcblx0XHQkKHdpbmRvdykub24oJ2hhc2hjaGFuZ2UnLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0YWpheFBhZ2VMb2FkKHdpbmRvdy5sb2NhdGlvbi5oYXNoLnJlcGxhY2UoL14jLywgJycpKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdCQoJ2JvZHknKS5vbignY2xpY2snLCAnYSNjb25maXJtTm8nLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCQoXCIjY29uZmlybUJveFwiKS5pcyhcIi5qcW1XaW5kb3dcIikpXHJcblx0XHRcdHtcclxuXHRcdFx0XHQkKCcjY29uZmlybUJveCcpLmpxbUhpZGUoKTtcclxuXHRcdFx0XHQkKCcjY29uZmlybUJveCcpLnJlbW92ZSgpO1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlXHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG59XHJcblxyXG5pZiAodHlwZW9mIGpRdWVyeSAhPSAndW5kZWZpbmVkJykge1xyXG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gSWYgcGFnZSB3YXMgbG9hZGVkIHdpdGggaGFzaFxyXG4gICAgICAgIGlmIChhamF4RW5hYmxlZCkge1xyXG4gICAgICAgICAgICBpZih3aW5kb3cubG9jYXRpb24uaGFzaCAhPSAnJykge1xyXG4gICAgICAgICAgICAgICAgYWpheFBhZ2VMb2FkKHdpbmRvdy5sb2NhdGlvbi5oYXNoLnJlcGxhY2UoL14jLywgJycpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYmluZEhhbmRsZXJzKCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxud2luZG93Lm5hbWUgPSAnbWFpbic7Il19
